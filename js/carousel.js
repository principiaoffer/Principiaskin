(function(){var e,t;window.jdgmCarousel=window.jdgmCarousel||{},jdgmCarousel._enqueuedFunctions=[],jdgmCarousel.enque=function(t){return jdgmCarousel._enqueuedFunctions.push(t),window.jdgm&&window.jdgm._doneSetup?e(jdgm.$):void 0},document.addEventListener("jdgm.doneSetup",function(){return e(jdgm.$)},!1),e=function(e){return jdgmCarousel._enqueuedFunctions=e.grep(jdgmCarousel._enqueuedFunctions,function(n){return t(e,n),!1})},t=function(e,t){var n;try{return t(e)}catch(r){return n=r,console.error(n)}}}).call(this),function(e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e():e()}(function(){var e="undefined"!=typeof window?window:this;e.jdgm=e.jdgm||{};var t=e.jdgm.Glider=function(t,n){var r=this;if(t._glider)return t._glider;if(r.ele=t,r.ele.classList.add("jdgm-glider"),r.ele._glider=r,r.opt=Object.assign({},{slidesToScroll:1,slidesToShow:1,resizeLock:!0,duration:.5,easing:function(e,t,n,r,i){return r*(t/=i)*t+n}},n),r.animate_id=r.page=r.slide=0,r.arrows={},r._opt=r.opt,r.opt.skipTrack)r.track=r.ele.children[0];else for(r.track=document.createElement("div"),r.ele.appendChild(r.track);1!==r.ele.children.length;)r.track.appendChild(r.ele.children[0]);r.track.classList.add("jdgm-glider-track"),r.init(),r.resize=r.init.bind(r,!0),r.event(r.ele,"add",{scroll:r.updateControls.bind(r)}),r.event(e,"add",{resize:r.resize})},n=t.prototype;return n.init=function(e,t){var n=this,r=0,i=0;n.slides=n.track.children,[].forEach.call(n.slides,function(e,t){e.classList.add("jdgm-glider-slide"),e.setAttribute("data-gslide",t)}),n.containerWidth=n.ele.clientWidth;var a=n.settingsBreakpoint();if(t||(t=a),"auto"===n.opt.slidesToShow||"undefined"!=typeof n.opt._autoSlide){var o=n.containerWidth/n.opt.itemWidth;n.opt._autoSlide=n.opt.slidesToShow=n.opt.exactWidth?o:Math.max(1,Math.floor(o))}"auto"===n.opt.slidesToScroll&&(n.opt.slidesToScroll=Math.floor(n.opt.slidesToShow)),n.itemWidth=n.opt.exactWidth?n.opt.itemWidth:n.containerWidth/n.opt.slidesToShow,[].forEach.call(n.slides,function(e){e.style.height="auto",e.style.width=n.itemWidth+"px",r+=n.itemWidth,i=Math.max(e.offsetHeight,i)}),n.track.style.width=r+"px",n.trackWidth=r,n.isDrag=!1,n.preventClick=!1,n.move=!1,n.opt.resizeLock&&n.scrollTo(n.slide*n.itemWidth,0),(a||t)&&(n.bindArrows(),n.buildDots(),n.bindDrag()),n.updateControls(),n.emit(e?"refresh":"loaded")},n.bindDrag=function(){var e=this;e.mouse=e.mouse||e.handleMouse.bind(e);var t=function(){e.mouseDown=void 0,e.ele.classList.remove("drag"),e.isDrag&&(e.preventClick=!0),e.isDrag=!1};const n=function(){e.move=!0};var r={mouseup:t,mouseleave:t,mousedown:function(t){t.preventDefault(),t.stopPropagation(),e.mouseDown=t.clientX,e.ele.classList.add("drag"),e.move=!1,setTimeout(n,300)},touchstart:function(t){e.ele.classList.add("drag"),e.move=!1,setTimeout(n,300)},mousemove:e.mouse,click:function(t){e.preventClick&&e.move&&(t.preventDefault(),t.stopPropagation()),e.preventClick=!1,e.move=!1}};e.ele.classList.toggle("draggable",e.opt.draggable===!0),e.event(e.ele,"remove",r),e.opt.draggable&&e.event(e.ele,"add",r)},n.buildDots=function(){var e=this;if(!e.opt.dots)return void(e.dots&&(e.dots.innerHTML=""));if("string"==typeof e.opt.dots?e.dots=document.querySelector(e.opt.dots):e.dots=e.opt.dots,e.dots){e.dots.innerHTML="",e.dots.setAttribute("role","tablist"),e.dots.classList.add("jdgm-glider-dots");for(var t=0;t<Math.ceil(e.slides.length/e.opt.slidesToShow);++t){var n=document.createElement("button");n.dataset.index=t,n.setAttribute("aria-label","Page "+(t+1)),n.setAttribute("role","tab"),n.className="glider-dot "+(t?"":"active"),e.event(n,"add",{click:e.scrollItem.bind(e,t,!0)}),e.dots.appendChild(n)}}},n.bindArrows=function(){var e=this;return e.opt.arrows?void["prev","next"].forEach(function(t){var n=e.opt.arrows[t];n&&("string"==typeof n&&(n=document.querySelector(n)),n&&(n._func=n._func||e.scrollItem.bind(e,t),e.event(n,"remove",{click:n._func}),e.event(n,"add",{click:n._func}),e.arrows[t]=n))}):void Object.keys(e.arrows).forEach(function(t){var n=e.arrows[t];e.event(n,"remove",{click:n._func})})},n.updateControls=function(e){var t=this;e&&!t.opt.scrollPropagate&&e.stopPropagation();var n=t.containerWidth>=t.trackWidth;t.opt.rewind||(t.arrows.prev&&(t.arrows.prev.classList.toggle("disabled",t.ele.scrollLeft<=0||n),t.arrows.prev.setAttribute("aria-disabled",t.arrows.prev.classList.contains("disabled"))),t.arrows.next&&(t.arrows.next.classList.toggle("disabled",Math.ceil(t.ele.scrollLeft+t.containerWidth)>=Math.floor(t.trackWidth)||n),t.arrows.next.setAttribute("aria-disabled",t.arrows.next.classList.contains("disabled")))),t.slide=Math.round(t.ele.scrollLeft/t.itemWidth),t.page=Math.round(t.ele.scrollLeft/t.containerWidth);var r=t.slide+Math.floor(Math.floor(t.opt.slidesToShow)/2),i=Math.floor(t.opt.slidesToShow)%2?0:r+1;1===Math.floor(t.opt.slidesToShow)&&(i=0),t.ele.scrollLeft+t.containerWidth>=Math.floor(t.trackWidth)&&(t.page=t.dots?t.dots.children.length-1:0),[].forEach.call(t.slides,function(e,n){var a=e.classList,o=a.contains("visible"),s=t.ele.scrollLeft,d=t.ele.scrollLeft+t.containerWidth,l=t.itemWidth*n,u=l+t.itemWidth;[].forEach.call(a,function(e){/^left|right/.test(e)&&a.remove(e)}),a.toggle("active",t.slide===n),r===n||i&&i===n?a.add("jdgm-center"):(a.remove("jdgm-center"),a.add([r>n?"jdgm-left":"jdgm-right",Math.abs(n-(r>n?r:i||r))].join("-")));var c=Math.ceil(l)>=Math.floor(s)&&Math.floor(u)<=Math.ceil(d);a.toggle("visible",c),c!==o&&t.emit("slide-"+(c?"visible":"hidden"),{slide:n})}),t.dots&&[].forEach.call(t.dots.children,function(e,n){e.classList.toggle("active",t.page===n)}),e&&t.opt.scrollLock&&(clearTimeout(t.scrollLock),t.scrollLock=setTimeout(function(){clearTimeout(t.scrollLock),Math.abs(t.ele.scrollLeft/t.itemWidth-t.slide)>.02&&(t.mouseDown||t.trackWidth>t.containerWidth+t.ele.scrollLeft&&t.scrollItem(t.getCurrentSlide()))},t.opt.scrollLockDelay||250))},n.getCurrentSlide=function(){var e=this;return e.round(e.ele.scrollLeft/e.itemWidth)},n.scrollItem=function(e,t,n){n&&n.preventDefault();var r=this,i=e;++r.animate_id;var a,o=r.slide;if(t===!0)e=Math.round(e*r.containerWidth/r.itemWidth),a=e*r.itemWidth;else{if("string"==typeof e){var s="prev"===e;if(e=r.opt.slidesToScroll%1||r.opt.slidesToShow%1?r.getCurrentSlide():r.slide,s?e-=r.opt.slidesToScroll:e+=r.opt.slidesToScroll,r.opt.rewind){var d=r.ele.scrollLeft;e=s&&!d?r.slides.length:!s&&d+r.containerWidth>=Math.floor(r.trackWidth)?0:e}}e=Math.max(Math.min(e,r.slides.length),0),r.slide=e,a=r.itemWidth*e}return r.emit("scroll-item",{prevSlide:o,slide:e}),r.scrollTo(a,r.opt.duration*Math.abs(r.ele.scrollLeft-a),function(){r.updateControls(),r.emit("animated",{value:i,type:"string"==typeof i?"arrow":t?"dot":"slide"})}),!1},n.settingsBreakpoint=function(){var t=this,n=t._opt.responsive;if(n){n.sort(function(e,t){return t.breakpoint-e.breakpoint});for(var r=0;r<n.length;++r){var i=n[r];if(e.innerWidth>=i.breakpoint)return t.breakpoint!==i.breakpoint?(t.opt=Object.assign({},t._opt,i.settings),t.breakpoint=i.breakpoint,!0):!1}}var a=0!==t.breakpoint;return t.opt=Object.assign({},t._opt),t.breakpoint=0,a},n.scrollTo=function(t,n,r){var i=this,a=(new Date).getTime(),o=i.animate_id,s=function(){var d=(new Date).getTime()-a;i.ele.scrollLeft=i.ele.scrollLeft+(t-i.ele.scrollLeft)*i.opt.easing(0,d,0,1,n),n>d&&o===i.animate_id?e.requestAnimationFrame(s):(i.ele.scrollLeft=t,r&&r.call(i))};e.requestAnimationFrame(s)},n.removeItem=function(e){var t=this;t.slides.length&&(t.track.removeChild(t.slides[e]),t.refresh(!0),t.emit("remove"))},n.addItem=function(e,t){var n=this;t?n.track.prepend(e):(t=!1,n.track.append(e)),n.refresh(!0),n.emit("add")},n.handleMouse=function(e){var t=this;t.mouseDown&&(t.isDrag=!0,t.ele.scrollLeft+=(t.mouseDown-e.clientX)*(t.opt.dragVelocity||3.3),t.mouseDown=e.clientX)},n.round=function(e){var t=this,n=t.opt.slidesToScroll%1||1,r=1/n;return Math.round(e*r)/r},n.refresh=function(e){var t=this;t.init(!0,e)},n.setOption=function(e,t){var n=this;n.breakpoint&&!t?n._opt.responsive.forEach(function(t){t.breakpoint===n.breakpoint&&(t.settings=Object.assign({},t.settings,e))}):n._opt=Object.assign({},n._opt,e),n.breakpoint=0,n.settingsBreakpoint()},n.destroy=function(){var t=this,n=t.ele.cloneNode(!0),r=function(e){e.removeAttribute("style"),[].forEach.call(e.classList,function(t){/^glider/.test(t)&&e.classList.remove(t)})};n.children[0].outerHTML=n.children[0].innerHTML,r(n),[].forEach.call(n.getElementsByTagName("*"),r),t.ele.parentNode.replaceChild(n,t.ele),t.event(e,"remove",{resize:t.resize}),t.emit("destroy")},n.emit=function(t,n){var r=this,i=new e.CustomEvent("glider-"+t,{bubbles:!r.opt.eventPropagate,detail:n});r.ele.dispatchEvent(i)},n.event=function(e,t,n){var r=e[t+"EventListener"].bind(e);Object.keys(n).forEach(function(e){r(e,n[e])})},t}),function(){jdgmCarousel.enque(function(e){var t,n,r,i,a,o,s,d,l,u,c,g,m,p,f,_;return t=function(e){return n(e),u(e)},n=function(t){return jdgm.asyncEach(t.find(".jdgm-row-carousel .jdgm-rev"),function(n){var r,i;return r=e(n),i="#"+r.data("review-id")+"-"+t.data("unique-string"),r.find(".jdgm-rev__pic-link").attr("href",i).attr("data-mfp-src",null).attr("data-popup",!1),r.append(["<a class='jdgm-rev__read-full' href='"+i+"' aria-label='"+jdgmSettings.widget_full_review_text+"' role='button'>",jdgmSettings.widget_full_review_text,"</a>"].join(""))})},u=function(t){var n,r;return r=t.find("."+t.data("class-prefix")+"__reviews"),0===r.length&&(r=t.find(".jdgm-all-reviews__body")),n=r.clone(),n.removeClass(""+t.data("class-prefix")+"__reviews jdgm-all-reviews__body").addClass(""+t.data("class-prefix")+"__duplicated-reviews"),jdgm.asyncEach(n.find(".jdgm-rev"),function(n){var r;return r=e(n),r.prop("id",""+r.data("review-id")+"-"+t.data("unique-string"))}),t.find("."+t.data("class-prefix")+"__header").after(n)},c=function(){var t,n;return n=e(".jdgm-row-carousel"),n.length>0&&!n.data("started-init-popup")?(n.data("started-init-popup",!0),t=n.closest(".jdgm-widget"),t.find(".jdgm-rev__pic-link, .jdgm-rev__read-full, .jdgm-row-readmore .jdgm-btn, .jdgm-row-readmore .jdgm-link").magnificPopup({type:"inline",mainClass:"jdgm-rev-popup",closeBtnInside:!0,midClick:!0,callbacks:{open:function(){var t;return e("body").addClass("jm-mfp-is-open"),t=e(this.content),t.show(),d(t)},close:function(){return e("body").removeClass("jm-mfp-is-open")}}})):void 0},d=function(t){return t.data("not-scroll-to",!0),jdgm.asyncEach(t.find("img[data-src]:not([src])"),function(t){return _(e(t))}),jdgm.asyncEach(t.find(".jdgm-rev__pic-link"),function(t){var n,r;return r=e(t),r.attr("data-mfp-src",null),n=r.clone(),r.after(n),r.remove()}),jdgm._insertIframesToYoutubeContainers(),t.hasClass("jdgm-widget__popup-content")&&f(t),t.hasClass("jdgm-qna-widg__popup-content")&&p(t),m(t)},_=function(e){var t;return e.attr("src",e.data("src")),t=e.parent(),t.removeClass("jdgm--loading"),t.hasClass("jdgm-rev__icon")?t.addClass("jdgm-rev__avatar"):void 0},f=function(e){var t;return!e.data("started-setup-reviews")&&(e.data("started-setup-reviews",!0),e.hasClass("jdgm-rev-widg__popup-content")&&(jdgm._setupLoadReviewsEventsFor(e),Number(jdgmSettings.widget_review_max_height)>0&&jdgm.setupLimitingReviewHeight(e.find(".jdgm-rev"))),e.hasClass("jdgm-revs-tab__popup-content")&&(jdgm._setupLoadReviewsEventsForFRT(e),e.data("review-type")&&jdgm._loadReviewsForFRT(e,e.data("review-type"),!1)),e.hasClass("jdgm-all-reviews__popup-content"))?(t=new jdgm.AllReviewsPage(e),t.initializationPromise.then(function(){return e.data("review-type")?t.loadReviews(e.data("review-type")):void 0})):void 0},p=function(e){return e.data("started-setup-questions")?void 0:(e.data("started-setup-questions",!0),jdgm._setupPaginateForQuestionWidget(e),jdgm.fetchQuestsFirstTime(e))},m=function(t){var n,r,i;return r=t.closest(".jm-mfp-wrap"),n=t.closest(".jm-mfp-content"),i=['<div class="jdgm-rev-popup__pic-actions">','<a href="#" rel="prev" class="jdmg-rev-popup__back jdmg-rev-popup__back-icon"></a>','<a href="#" rel="prev" class="jdmg-rev-popup__back">Back</a>',"</div>"].join(""),t.off("click",".jdgm-rev__pic-link"),t.on("click",".jdgm-rev__pic-link",function(a){var o,s,d;return a.preventDefault(),n.data("offset-top",n.offset().top),t.hide(),n.find(".jdgm-rev-popup__pic").remove(),s='<div class="jdgm-rev-popup__carousel-wrapper"><div class="jdgm-rev-popup__carousel">',jdgm.asyncEach(e(this).closest(".jdgm-rev__pics").find(".jdgm-rev__pic-link"),function(t){return s+=['<div class="jdgm-rev__pic">','<img class="jdgm-rev__pic-img" alt="User picture" src="'+e(t).attr("href")+'" />',"</div>"].join("")}),s+="</div>",s+='<button aria-label="Previous" class="jdgm-rev-carousel-prev"></button>',s+='<button aria-label="Next" class="jdgm-rev-carousel-next"></button></div>',n.append('<div class="jdgm-rev-popup__pic">'+i+s+"</div"),o=new jdgm.Glider(n.find(".jdgm-rev-popup__carousel")[0],{scrollLock:!0,draggable:!0,arrows:{prev:".jdgm-rev-popup__pic .jdgm-rev-carousel-prev",next:".jdgm-rev-popup__pic .jdgm-rev-carousel-next"}}),d=e(this).index()*n.find(".jdgm-rev-popup__carousel").width(),setTimeout(function(){return o.scrollTo(d,400)},0),n.on("glider-slide-visible",".jdgm-rev-popup__carousel",function(e){var t;return t=n.find(".jdgm-rev__pic.visible .jdgm-rev__pic-img").height(),n.find(".jdgm-rev-popup__carousel-wrapper").height(t),n.find(".jdgm-glider-track").height(t)}),n.on("click",".jdgm-rev-popup__pic",function(e){return e.preventDefault(),e.stopPropagation()}),n.on("click",".jdmg-rev-popup__back",function(e){var i;return e.preventDefault(),t.show(),n.find(".jdgm-rev-popup__pic").remove(),i=r.offset().top+48-n.data("offset-top"),r.animate({scrollTop:i},0)})})},l=function(){return jdgm.eachWidgetWithReviews(function(e){var t,n;return t=e.find(".jdgm-row-carousel"),t.length>0&&!t.data("started-customize-widget-for-popup")?(t.data("started-customize-widget-for-popup",!0),n=s(e),e.data("number-of-reviews")>0&&r(e,jdgmSettings.widget_first_sub_tab),n&&a(e),o(e,n)):void 0})},s=function(e){var t;return t=!1,"jdgm-rev-widg"===e.data("class-prefix")&&(t=e.data("number-of-questions")>0),["jdgm-revs-tab","jdgm-all-reviews"].indexOf(e.data("class-prefix"))>=0&&("product-reviews"===jdgmSettings.widget_first_sub_tab&&(t=e.data("number-of-shop-reviews")>0),"shop-reviews"===jdgmSettings.widget_first_sub_tab&&(t=e.data("number-of-product-reviews")>0)),t},r=function(t,n,r){var i,a,o,s,d,l,u;return null==r&&(r=!0),d=r?"popup-primary-content":"popup-secondary-content",u="jdgm-widget__"+d+"--"+t.data("unique-string"),l="jdgm-widget__popup-content "+t.data("class-prefix")+"__popup-content",s=e("<div id='"+u+"' class='"+l+"' data-review-type='"+n+"'></div>"),s.data("id",t.data("id")),s.data("review-type",n),o=t.find(".jdgm-row-search"),s.append(o.clone()),r&&o.remove(),a=t.find(".jdgm-row-actions"),s.append(a.clone()),r&&a.remove(),"jdgm-rev-widg"===t.data("class-prefix")&&(s.append(t.find(".jdgm-rev-widg__body").detach()),s.append(t.find(".jdgm-rev-widg__paginate-spinner-wrapper").detach()),t.find(".jdgm-rev-widg__header").after(s)),"jdgm-revs-tab"===t.data("class-prefix")&&(r?s.append(t.find(".jdgm-revs-tab__content-body").detach()):(i=t.find(".jdgm-revs-tab__content-body").clone(),i.find(".jdgm-revs-tab__reviews").html(""),s.append(i)),t.find(".jdgm-revs-tab__content-header").after(s)),"jdgm-all-reviews"===t.data("class-prefix")?(r?(s.append(t.find(".jdgm-all-reviews__body:not(.jdgm-all-reviews__duplicated-reviews)").detach()),s.append(t.find(".jdgm-shop-reviews__body").detach()),s.append(t.find(".jdgm-all-reviews__footer").detach())):(s.append('<div class="jdgm-all-reviews__body"></div>'),0===s.find(".jdgm-shop-reviews__body").length&&s.append('<div class="jdgm-shop-reviews__body"></div>'),s.append(t.find(".jdgm-all-reviews__footer").clone())),0===s.find(".jdgm-spinner").length&&s.append('<div class="jdgm-spinner"></div>'),t.find(".jdgm-all-reviews__header").after(s)):void 0},a=function(t){var n,a;return"jdgm-rev-widg"===t.data("class-prefix")&&(n=e("<div id='jdgm-widget__popup-secondary-content--"+t.data("unique-string")+"' class='jdgm-widget__popup-content jdgm-qna-widg__popup-content'></div>"),n.data("id",t.data("id")),n=i(t,n),t.find(".jdgm-rev-widg__header").after(n)),["jdgm-revs-tab","jdgm-all-reviews"].indexOf(t.data("class-prefix"))>=0?(a="product-reviews"===jdgmSettings.widget_first_sub_tab?"shop-reviews":"product-reviews",r(t,a,!1)):void 0},i=function(e,t){var n;return t.data("number-of-questions",1),t.append("<h2 class='jdgm-rev-widg__title'>"+jdgmSettings.widget_questions_and_answers_text+"</h2>"),t.append("<div class='jdgm-quest-widg__body'></div>"),n=e.find(".jdgm-subtab"),n.find(".jdgm-subtab__name").removeClass("jdgm--active"),n.find('.jdgm-subtab__name[data-tabname="questions"]').addClass("jdgm--active"),t.append(n.detach()),t.append("<div class='jdgm-rev-widg__paginate-spinner-wrapper'><div class='jdgm-spinner'></div></div>"),t},o=function(t,n){var r,i,a;return null==n&&(n=!1),i=null,a=null,"jdgm-rev-widg"===t.data("class-prefix")&&(t.data("number-of-reviews")>0&&(i=jdgmSettings.widget_read_more_reviews_text),t.data("number-of-questions")>0&&(a=jdgmSettings.widget_read_questions_text)),["jdgm-revs-tab","jdgm-all-reviews"].indexOf(t.data("class-prefix"))>=0&&("product-reviews"===jdgmSettings.widget_first_sub_tab&&(t.data("number-of-product-reviews")>0&&(i=jdgmSettings.widget_product_reviews_subtab_text),t.data("number-of-shop-reviews")>0&&(a=jdgmSettings.widget_shop_reviews_subtab_text)),"shop-reviews"===jdgmSettings.widget_first_sub_tab&&(t.data("number-of-shop-reviews")>0&&(i=jdgmSettings.widget_shop_reviews_subtab_text),t.data("number-of-product-reviews")>0&&(a=jdgmSettings.widget_product_reviews_subtab_text))),r=e("<div class='jdgm-row-readmore'></div>"),null!==i&&r.append(["<a class='jdgm-btn jdgm-btn--dark' href='#jdgm-widget__popup-primary-content--"+t.data("unique-string")+"' role='button'>",i,"</a>"].join("")),n&&null!==a&&r.append(["<div class='jdgm-link-wrapper'><a class='jdgm-link' href='#jdgm-widget__popup-secondary-content--"+t.data("unique-string")+"' role='button'>",a,"</a></div>"].join("")),(null!==i||n&&null!==a)&&t.find(".jdgm-row-carousel").after(r),null===i?t.find(".jdgm-row-carousel").hide():void 0},g=function(){var t;return t=e(".jdgm-rev-popup:visible .jdgm-widget__popup-content"),t.length>0?d(t):void 0},e(document).on("jdgm.doneRenderCarousel",function(e,n){var r;return r=n.$reviewWidget,t(r)}),e(document).on("jdgm.doneLoadingMediaJs",function(e,t){return l(),c()}),e(document).on("jdgm.doneSetupARP",function(e,t){var n,r;return n=t.$widget,r=n.find(".jdgm-widget__popup-content"),r.find(".jdgm-all-reviews__footer").length<=0?(r.append(n.find(".jdgm-spinner").detach()),r.append(n.find(".jdgm-all-reviews__footer").detach())):void 0}),e(document).on("jdgm.doneCustomizeReviews",function(e,t){return g()}),e(document).on("jdgm.doneCustomizeQuestions",function(e,t){return g()}),e(document).on("jdgm.doneFetchGravatar",function(e,t){var n;return n=t.$gravatarIcon,n?_(n.find("img[data-src]:not([src])")):void 0})})}.call(this),function(){jdgmCarousel.enque(function(e){var t,n,r,i,a,o,s,d,l;return t=function(e){var t;return!e.data("started-customize-reviews")&&0===e.find(".jdgm-row-carousel").length&&(e.data("number-of-reviews")>0||e.data("number-of-questions")>0)?(e.data("started-customize-reviews",!0),t=e.find(".jdgm-rev"),n(e,t),jdgm.triggerEvent("doneRenderCarousel",{$reviewWidget:e})):void 0},n=function(t,n){var r,i;return i=e("<div class='jdgm-row-carousel' data-review-type='"+jdgmSettings.widget_first_sub_tab+"'></div>"),r=e('<div class="jdgm-rev-carousel"></div>'),jdgm.asyncEach(n,function(t){return r.append(o(e(t)))}),i.append(r),t.find(".jdgm-row-stars").before(i),t.data("number-of-reviews")>0?(s(t,i),d(i),l(t),setTimeout(function(){return window.dispatchEvent(new Event("resize"))},0)):void 0},o=function(t){var n,r;return n=t.clone(),a(n),i(n),r=[".jdgm-rev__custom-form",".jdgm-rev__pics",".jdgm-rev__vids",".jdgm-rev__social",".jdgm-rev__reply"],n.find(r.join(",")).remove(),n.find("img[data-src]").unveil(0,function(){return e(this).parent(".jdgm-rev__icon").removeClass("jdgm--loading").addClass("jdgm-rev__avatar"),e(this).removeClass("jdgm--loading")}),n},a=function(t){var n;return n=e('<div class="jdgm-rev__media"></div>'),n.append(t.find(".jdgm-rev__pic-link").detach()),t.find(".jdgm-rev__body").after(n)},s=function(e,t){var n,r,i,a,o;return o=t.width(),n=420>o?1:2,n=680>o?2:3,r=420>o?1:2,a="jdgm-carousel-"+e.data("unique-string"),t.addClass(a),t.append('<button aria-label="Previous" class="jdgm-rev-carousel-prev"></button>'),t.append('<button aria-label="Next" class="jdgm-rev-carousel-next"></button>'),i=new jdgm.Glider(t.find(".jdgm-rev-carousel")[0],{draggable:!0,arrows:{prev:"."+a+" .jdgm-rev-carousel-prev",next:"."+a+" .jdgm-rev-carousel-next"},responsive:[{breakpoint:767,settings:{slidesToShow:r}},{breakpoint:991,settings:{slidesToShow:n}}]}),t.data("carousel",i)},d=function(t){return jdgm.asyncEach(t.find(".jdgm-rev"),function(t){var n,r,i,a;return r=e(t),i=r.find(".jdgm-rev__body"),a=i.css("lineHeight").replace("px",""),n=e(i.find("p")[0]),i.text(n.text()),i.height(4*a),r.find(".jdgm-rev__title").height(a)})},i=function(t){var n;return n=t.find(".jdgm-rev__vids .jdgm-vid-player, .jdgm-rev__vids .jdgm-yt-video"),jdgm.asyncEach(n,function(n){var i,a,o,s;return i=e(n),i.hasClass("jdgm-yt-video")?(s="https://img.youtube.com/vi/"+i.data("id")+"/default.jpg",o="https://www.youtube.com/embed/"+i.data("id")+"?rel=0&showinfo=0&autoplay=0&cc_load_policy=1",r(t,s,o)):(a=i.data("external-id"))?a.length>16?(s="https://videodelivery.net/"+a+"/thumbnails/thumbnail.jpg?time=1s&height=120",o="https://iframe.videodelivery.net/"+a,r(t,s,o)):(o="https://vimeo.com/"+a,e.ajax({url:"https://vimeo.com/api/oembed.json",data:{url:o},success:function(e){return r(t,e.thumbnail_url,o)}})):void 0})},r=function(t,n,r){var i,a;return a=e("<img class='jdgm-rev__pic-img' alt='User picture' src='"+n+"' />"),i=e("<a class='jdgm-rev__pic-link jdgm-rev__vid-link' target='_blank' rel='nofollow noopener'></a>"),i.append(a),i.attr("href",r),t.find(".jdgm-rev__media").append(i)},l=function(e){return e.off("click",".jdgm-paginate__page:not(.jdgm-curt)"),e.off("change",".jdgm-review-search")},e(document).on("jdgm.doneCustomizeReviews",function(t,n){var r,i,a,o;return a=n.$reviews,r=a.filter(e(".jdgm-rev--pending")),r.length>0?(i=r.closest(".jdgm-widget"),o=i.find(".jdgm-row-carousel"),o.data("carousel").addItem(r[0],!0)):void 0}),jdgm.eachWidgetWithReviews(function(e){return t(e)})})}.call(this);